# Airtable Integration Skill - 바이브코딩 사례 분석

AI 코딩 도구(Claude Code)와 협업하여 에어테이블 연동 스킬을 만든 과정을 분석합니다.

---

## 1. 프로젝트 개요

### 목적

**문제**: 매번 새 프로젝트에서 에어테이블 연동할 때마다 반복 작업 발생

```
[나]
매번 프로젝트 새로 시작할 때마다 에어테이블 연동하는 게 번거로운데
이걸 스킬로 만들거나 재사용하는 그런 똑똑한 방법이 있을까?
```

**목표**: "에어테이블 연동해줘" 한 마디로 MCP + SDK + 스키마 캐싱까지 자동 설정되는 스킬 만들기

### 접근방식

| 단계 | 모드 | 역할 |
|------|------|------|
| 1. 플랜 수립 | Prometheus | 기존 프로젝트 분석, MCP vs SDK 논의, 토큰 비용 분석 |
| 2. 실행 | Sisyphus | 스킬 생성, 에셋 작성, 테스트 |
| 3. 반복 개선 | 대화 | 사용하면서 발견한 문제점 즉시 피드백 → 수정 |

**핵심 워크플로우**: Plan → Execute → Use → Feedback → Improve

### 결과

**생성된 스킬 구조:**
```
~/.claude/skills/airtable-integration/
├── SKILL.md (291줄)
├── assets/
│   ├── airtable.ts, airtable.types.ts (SDK 래퍼)
│   ├── mcp-config.json (MCP 설정 템플릿)
│   └── schema-generator.md (스키마 생성 가이드)
└── references/
    ├── llm-rules.md (API 효율화 규칙)
    ├── schema-template.md, claude-context.md, usage-guide.md
```

**주요 기능:**
- MCP 서버 자동 설정 (15개 도구)
- SDK 래퍼 설치 (타입 안전)
- 스키마 캐싱 (토큰 절약)
- 스냅샷 관리 (정적 데이터 로컬 저장)
- LLM 효율성 규칙 (7개 안티패턴 방지)

---

## 2. 바이브코더로서 잘한 점

### 2-1. 명확한 문제 정의

추상적 요청이 아닌, 구체적인 불편함을 설명했습니다.

```
[나]
동일한 베이스에서 작업을 하는데도 매번 작업 요청할 때마다 
테이블 구조 읽고, 필드 타입 읽고, 각 테이블과 필드가 뭐하는건지 또 파악하고..
이러면서 굉장히 비효율적인거 같더라고.
```

**효과**: AI가 문제의 본질(토큰 낭비, API 호출 반복)을 정확히 파악하고 해결책 제시

### 2-2. 구체적인 예시 제공

```
[나]
자주 안 바뀌는 정적 데이터 예시: 이미 과거에 쌓인 결제데이터, 이번기수에 확정된 스터디 데이터
```

**효과**: AI가 "스냅샷 관리" 기능의 실제 유스케이스를 이해하고 적절한 설계 가능

### 2-3. 즉각적이고 직접적인 피드백

문제를 발견하면 바로 지적했습니다.

```
[나]
스키마 생성하고 왜 저장을 안해?
아니 내가 말하는 건 gpters-partners 가서 스키마 생성해달라고 했는데 
만들어주고 저장을 안해
```

**결과**: "⚠️ 반드시 저장" 강조 문구가 스킬에 추가됨

### 2-4. 명확한 방향 제시

선택지가 있을 때, 결정을 AI에게 미루지 않고 직접 결정했습니다.

```
[나]
일단 무조건 sdk도 되게 하자. 선택으로 두지마.
```

```
[나]
폴더명 appId 말고 한글명으로 가능할까? → "한글명만" 선택
```

**효과**: AI가 명확한 요구사항에 맞춰 구현, 불필요한 질문 왕복 감소

### 2-5. AI 추천 활용법

모르는 건 AI에게 맡기고, 결과에서 선택했습니다.

```
[나]
스키마 캐싱 방식: 잘 모르겠어. 너가 추천해줘

[AI - Prometheus]
자동 생성 + 수동 보강 방식 추천 (이유 설명)

[나]
json / 수동으로 (구체적 선택)
```

**패턴**: "추천해줘" → AI가 옵션 제시 → 내가 선택 → AI가 구현

### 2-6. 여러 작업 한 번에 요청

```
[나]
플랜 생성하고, 추가로 CLAUDE.md 지침에 학습 문서 저장 규칙 추가해줘.
```

**효과**: 컨텍스트 전환 없이 관련 작업을 묶어서 처리

---

## 3. 이 프로젝트에서 배운 것

### 3-1. MCP와 SDK는 경쟁 관계가 아니다

```
[AI - Prometheus]
이 둘은 용도가 다릅니다:

| 상황 | 최적의 도구 |
|------|-----------|
| "파트너스 현황 요약해줘" (대화) | MCP - Claude가 직접 읽음 |
| 웹앱에서 파트너 목록 페이지 구현 | SDK 래퍼 - 앱 코드에서 사용 |
```

**인사이트**: 둘 다 설치해도 충돌 없음. 용도에 맞게 사용하면 됨.

### 3-2. 토큰 비용은 상대적으로 봐야 한다

```
[AI - Prometheus]
| 비교 대상 | 토큰 비용 |
|----------|---------|
| 도구 정의 83개 | ~3,000~5,000 토큰 |
| 코드 파일 1개 읽기 | ~1,000~3,000 토큰 |

전체 컨텍스트 대비 도구 정의 비용은 크지 않아요.
```

**인사이트**: MCP 도구 추가를 너무 두려워할 필요 없음. 다만 프로젝트별 설치로 최적화 가능.

### 3-3. AUTO/USER 마커로 자동 생성과 수동 보강 분리

```markdown
<!-- AUTO-GENERATED: 아래 내용은 자동 생성됨 -->
| 필드명 | 타입 | Field ID |
...
<!-- /AUTO-GENERATED -->

<!-- USER-ADDED: 비즈니스 컨텍스트 -->
- 이름: 실명 (카카오톡 닉네임 X)
<!-- /USER-ADDED -->
```

**인사이트**: 스키마 재생성 시 USER-ADDED 영역만 보존하면 됨.

### 3-4. CRITICAL 지침으로 에이전틱 루프 자동화

```
[AI - Prometheus]
CRITICAL: 다음 MCP 도구 사용 후에는 반드시 스키마 파일을 갱신해야 한다:
- create_table, update_table, create_field, update_field

Claude가 create_field 호출 → CRITICAL 지침 인식 → 자동으로 스키마 갱신
```

**인사이트**: Hook 시스템 없이도 "지침 기반 자동화"로 원하는 동작 유도 가능.

### 3-5. 반복 개선이 품질을 만든다

| Day 1 | Day 2 |
|-------|-------|
| 스키마 캐싱 별도 요청 필요 | 기본 설치에 포함 |
| 폴더명 appId | 한글 베이스명 |
| SDK 선택적 | SDK 필수 |
| 스키마 자동 갱신 없음 | CRITICAL 지침 추가 |

**인사이트**: 처음부터 완벽하게 만들려 하지 말고, 쓰면서 개선하는 게 더 효과적.

---

## 4. 더 배워야 할 것

### 4-1. skill-creator 스킬 실제 활용

이번 프로젝트에서 skill-creator 스킬을 "활용해서 구조적으로 전면 개편"하고 싶다고 요청했지만:

```
[실제 작업 방식]
- skill-creator 스킬 로드: ❌ 안 함
- references/ 디렉토리 구조 참고: ✅ 탐색으로 확인
- init_skill.py, package_skill.py 스크립트 사용: ❌ 안 함
```

**다음에 시도할 것**: skill-creator 스킬을 실제로 로드해서 스크립트 활용하기

### 4-2. MCP 인증 체계 이해

gpters-toolkit 배포 시 401 에러 발생:

```
HTTP MCP 서버에 인증 헤더가 설정되지 않음
→ API 키 또는 Bearer 토큰 필요
```

**다음에 학습할 것**: 
- OAuth 인증 플로우
- `.mcp.json`에 Bearer 토큰 설정 방법
- 환경변수로 API 키 전달

### 4-3. 멀티 베이스 SDK 래퍼

현재 SDK 래퍼는 단일 베이스에 고정:

```typescript
_base = airtable.base(process.env.AIRTABLE_BASE_ID)  // 싱글톤
```

**개선 방향**: `getBase(baseId)` 함수 추가로 멀티 베이스 지원

### 4-4. 스킬 버전 관리

현재: GitHub 레포 + gpters-toolkit 수동 배포

**고려할 것**:
- 스킬 버전 태깅
- 변경 사항 자동 동기화
- 여러 프로젝트에 설치된 스킬 일괄 업데이트

---

## 핵심 교훈 요약

| 카테고리 | 교훈 |
|----------|------|
| **요청 방식** | 추상적 요청 X, 구체적 문제 + 예시 제공 |
| **피드백** | 문제 발견 시 즉각적이고 직접적으로 지적 |
| **결정** | AI에게 선택지 받고, 내가 결정 |
| **개선** | 처음부터 완벽 X, 쓰면서 반복 개선 |
| **자동화** | CRITICAL 지침으로 에이전틱 루프 유도 |

---

*작성일: 2026-01-30*
*기반 문서: DEVLOG.md*
